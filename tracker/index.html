<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Job Application Tracker</title>
  <link rel="stylesheet" href="/design-system.css">
  <link rel="stylesheet" href="/tracker.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="tracker-container">
    <!-- Header -->
    <header class="tracker-header">
      <div class="header-left">
        <img src="/assets/mascot/peebo-idle.svg" alt="Peebo" class="mascot" id="mascot">
        <h1>My applications</h1>
      </div>
      <div class="header-right">
        <div class="search-wrapper">
          <svg class="search-icon" width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="8" cy="8" r="5"/>
            <path d="M12 12l4 4"/>
          </svg>
          <input type="text" class="input search-input" id="search-input" placeholder="Search applications...">
        </div>
        <button class="btn btn-primary" id="add-btn">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 3v12M3 9h12"/>
          </svg>
          Add
        </button>
        <button class="btn btn-accent" id="batch-apply-btn" title="Apply to multiple jobs">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M2 4h14M2 9h14M2 14h14"/>
            <circle cx="15" cy="4" r="1.5" fill="currentColor"/>
            <circle cx="15" cy="9" r="1.5" fill="currentColor"/>
            <circle cx="15" cy="14" r="1.5" fill="currentColor"/>
          </svg>
          Batch Apply
        </button>
        <button class="btn btn-icon btn-ghost" id="settings-btn" title="Settings">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="10" cy="10" r="3"/>
            <path d="M10 1v2m0 14v2M1 10h2m14 0h2M3.5 3.5l1.5 1.5m10 10l1.5 1.5M3.5 16.5l1.5-1.5m10-10l1.5-1.5"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Active Applications (In Progress) -->
    <div class="active-applications hidden" id="active-applications">
      <div class="active-header">
        <div class="active-title">
          <div class="pulse-indicator"></div>
          <h2>In application now</h2>
          <span class="active-count" id="active-count">0</span>
        </div>
        <button class="btn btn-sm btn-ghost" id="refresh-active">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M2 8a6 6 0 0112 0M14 8a6 6 0 01-12 0"/>
            <path d="M2 4v4h4M14 12V8h-4"/>
          </svg>
          Refresh
        </button>
      </div>

      <div class="active-jobs" id="active-jobs">
        <!-- Active job cards inserted here -->
      </div>
    </div>

    <!-- Stats Bar -->
    <div class="stats-bar">
      <div class="stat">
        <span class="stat-value" id="stat-total">0</span>
        <span class="stat-label">Total</span>
      </div>
      <div class="stat">
        <span class="stat-value stat-applied" id="stat-applied">0</span>
        <span class="stat-label">Applied</span>
      </div>
      <div class="stat">
        <span class="stat-value stat-interviewing" id="stat-interviewing">0</span>
        <span class="stat-label">Interviewing</span>
      </div>
      <div class="stat">
        <span class="stat-value stat-offer" id="stat-offer">0</span>
        <span class="stat-label">Offers</span>
      </div>
    </div>

    <!-- Kanban Board -->
    <main class="kanban-board" id="kanban-board">
      <!-- Applied Column -->
      <div class="kanban-column" data-status="applied">
        <div class="column-header">
          <div class="column-title">
            <span class="status-dot applied"></span>
            <h2>Applied</h2>
            <span class="column-count" id="count-applied">0</span>
          </div>
        </div>
        <div class="column-cards" id="cards-applied" data-status="applied">
          <!-- Cards inserted here -->
        </div>
      </div>

      <!-- Interviewing Column -->
      <div class="kanban-column" data-status="interviewing">
        <div class="column-header">
          <div class="column-title">
            <span class="status-dot interviewing"></span>
            <h2>Interviewing</h2>
            <span class="column-count" id="count-interviewing">0</span>
          </div>
        </div>
        <div class="column-cards" id="cards-interviewing" data-status="interviewing">
          <!-- Cards inserted here -->
        </div>
      </div>

      <!-- Rejected Column -->
      <div class="kanban-column" data-status="rejected">
        <div class="column-header">
          <div class="column-title">
            <span class="status-dot rejected"></span>
            <h2>Rejected</h2>
            <span class="column-count" id="count-rejected">0</span>
          </div>
        </div>
        <div class="column-cards" id="cards-rejected" data-status="rejected">
          <!-- Cards inserted here -->
        </div>
      </div>

      <!-- Offer Column -->
      <div class="kanban-column" data-status="offer">
        <div class="column-header">
          <div class="column-title">
            <span class="status-dot offer"></span>
            <h2>Offer</h2>
            <span class="column-count" id="count-offer">0</span>
          </div>
        </div>
        <div class="column-cards" id="cards-offer" data-status="offer">
          <!-- Cards inserted here -->
        </div>
      </div>
    </main>

    <!-- Add/Edit Modal (Simple) -->
    <div class="modal-overlay hidden" id="add-modal-overlay">
      <div class="modal" id="add-modal">
        <div class="modal-header">
          <h2>Add application</h2>
          <button class="btn btn-icon btn-ghost modal-close">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 5l10 10M15 5l-10 10"/>
            </svg>
          </button>
        </div>
        <form id="add-form">
          <div class="form-group">
            <label class="form-label" for="add-company">Company *</label>
            <input type="text" class="input" id="add-company" required placeholder="e.g., Acme Corp">
          </div>

          <div class="form-group">
            <label class="form-label" for="add-role">Role *</label>
            <input type="text" class="input" id="add-role" required placeholder="e.g., Senior Product Manager">
          </div>

          <div class="form-group">
            <label class="form-label" for="add-url">Job URL</label>
            <input type="url" class="input" id="add-url" placeholder="https://...">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="add-status">Status</label>
              <select class="input" id="add-status">
                <option value="applied">Applied</option>
                <option value="interviewing">Interviewing</option>
                <option value="rejected">Rejected</option>
                <option value="offer">Offer</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label" for="add-salary-min">Min salary</label>
              <input type="number" class="input" id="add-salary-min" placeholder="150000">
            </div>

            <div class="form-group">
              <label class="form-label" for="add-salary-max">Max salary</label>
              <input type="number" class="input" id="add-salary-max" placeholder="180000">
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="add-notes">Notes</label>
            <textarea class="input" id="add-notes" rows="3" placeholder="Any notes about this application..."></textarea>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
            <button type="submit" class="btn btn-primary">Add application</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Detailed View Modal (6 Tabs) -->
    <div class="modal-overlay hidden" id="detail-modal-overlay">
      <div class="modal modal-large" id="detail-modal">
        <div class="modal-header">
          <h2 id="detail-title">Application details</h2>
          <button class="btn btn-icon btn-ghost modal-close">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 5l10 10M15 5l-10 10"/>
            </svg>
          </button>
        </div>

        <div class="modal-tabs">
          <button class="tab-btn active" data-tab="basic">Basic</button>
          <button class="tab-btn" data-tab="contacts">Contacts</button>
          <button class="tab-btn" data-tab="interviews">Interviews</button>
          <button class="tab-btn" data-tab="prep">Prep</button>
          <button class="tab-btn" data-tab="offer">Offer</button>
          <button class="tab-btn" data-tab="notes">Notes</button>
        </div>

        <form id="detail-form">
          <input type="hidden" id="detail-id">

          <!-- Basic Tab -->
          <div class="tab-content active" data-tab="basic">
            <div class="form-group">
              <label class="form-label" for="detail-company">Company</label>
              <input type="text" class="input" id="detail-company" required>
            </div>

            <div class="form-group">
              <label class="form-label" for="detail-role">Role</label>
              <input type="text" class="input" id="detail-role" required>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="detail-status">Status</label>
                <select class="input" id="detail-status">
                  <option value="applied">Applied</option>
                  <option value="interviewing">Interviewing</option>
                  <option value="rejected">Rejected</option>
                  <option value="offer">Offer</option>
                </select>
              </div>

              <div class="form-group">
                <label class="form-label" for="detail-interview-stage">Interview stage</label>
                <select class="input" id="detail-interview-stage">
                  <option value="">None</option>
                  <option value="recruiter_screen">Recruiter screen</option>
                  <option value="hiring_manager">Hiring manager</option>
                  <option value="panel_onsite">Panel/Onsite</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label" for="detail-url">Job URL</label>
              <input type="url" class="input" id="detail-url">
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="detail-date-applied">Date applied</label>
                <input type="date" class="input" id="detail-date-applied">
              </div>

              <div class="form-group">
                <label class="form-label" for="detail-last-activity">Last activity</label>
                <input type="date" class="input" id="detail-last-activity">
              </div>

              <div class="form-group">
                <label class="form-label" for="detail-follow-up-by">Follow up by</label>
                <input type="date" class="input" id="detail-follow-up-by">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="detail-salary-min">Min salary</label>
                <input type="number" class="input" id="detail-salary-min">
              </div>

              <div class="form-group">
                <label class="form-label" for="detail-salary-max">Max salary</label>
                <input type="number" class="input" id="detail-salary-max">
              </div>
            </div>

            <div class="form-group">
              <label class="form-label" for="detail-next-action">Next action</label>
              <input type="text" class="input" id="detail-next-action">
            </div>

            <div class="form-group">
              <label class="form-label" for="detail-referral-status">Referral status</label>
              <select class="input" id="detail-referral-status">
                <option value="none">None</option>
                <option value="requested">Requested</option>
                <option value="received">Received</option>
              </select>
            </div>
          </div>

          <!-- Contacts Tab -->
          <div class="tab-content" data-tab="contacts">
            <h3>Recruiter</h3>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="detail-recruiter-name">Name</label>
                <input type="text" class="input" id="detail-recruiter-name">
              </div>

              <div class="form-group">
                <label class="form-label" for="detail-recruiter-email">Email</label>
                <input type="email" class="input" id="detail-recruiter-email">
              </div>
            </div>

            <h3>Hiring manager</h3>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="detail-hm-name">Name</label>
                <input type="text" class="input" id="detail-hm-name">
              </div>

              <div class="form-group">
                <label class="form-label" for="detail-hm-email">Email</label>
                <input type="email" class="input" id="detail-hm-email">
              </div>
            </div>

            <h3>Referral</h3>
            <div class="form-group">
              <label class="form-label" for="detail-referral-contact">Referral contact</label>
              <input type="text" class="input" id="detail-referral-contact" placeholder="Name or email">
            </div>
          </div>

          <!-- Interviews Tab -->
          <div class="tab-content" data-tab="interviews">
            <div class="interviews-list" id="interviews-list">
              <!-- Interview items inserted here -->
            </div>
            <button type="button" class="btn btn-secondary" id="add-interview-btn">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M8 2v12M2 8h12"/>
              </svg>
              Add interview
            </button>
          </div>

          <!-- Prep Tab -->
          <div class="tab-content" data-tab="prep">
            <div class="checklist">
              <label class="checkbox-label">
                <input type="checkbox" id="prep-company-research">
                <span>Company research completed</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="prep-star-stories">
                <span>STAR stories prepared</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="prep-questions-ready">
                <span>Questions for interviewer ready</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="prep-technical-prep">
                <span>Technical prep completed</span>
              </label>
            </div>
          </div>

          <!-- Offer Tab -->
          <div class="tab-content" data-tab="offer">
            <div class="form-group">
              <label class="form-label" for="detail-offer-initial">Initial offer</label>
              <input type="number" class="input" id="detail-offer-initial">
            </div>

            <div class="form-group">
              <label class="form-label" for="detail-offer-counter">Counter offer</label>
              <input type="number" class="input" id="detail-offer-counter">
            </div>

            <div class="form-group">
              <label class="form-label" for="detail-offer-final">Final offer</label>
              <input type="number" class="input" id="detail-offer-final">
            </div>

            <div class="form-group">
              <label class="form-label" for="detail-offer-bonus">Bonus</label>
              <input type="number" class="input" id="detail-offer-bonus">
            </div>

            <div class="form-group">
              <label class="form-label" for="detail-offer-equity">Equity</label>
              <input type="text" class="input" id="detail-offer-equity" placeholder="e.g., 10,000 shares, 4-year vest">
            </div>
          </div>

          <!-- Notes Tab -->
          <div class="tab-content" data-tab="notes">
            <div class="form-group">
              <label class="form-label" for="detail-notes">Application notes</label>
              <textarea class="input" id="detail-notes" rows="5" placeholder="General notes about this application..."></textarea>
            </div>

            <div class="form-group">
              <label class="form-label" for="detail-company-research">Company research</label>
              <textarea class="input" id="detail-company-research" rows="5" placeholder="Research about the company, products, culture, etc..."></textarea>
            </div>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
            <button type="submit" class="btn btn-primary">Save changes</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay hidden" id="settings-modal-overlay">
      <div class="modal" id="settings-modal">
        <div class="modal-header">
          <h2>‚öôÔ∏è Settings</h2>
          <button class="btn btn-icon btn-ghost modal-close">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 5l10 10M15 5l-10 10"/>
            </svg>
          </button>
        </div>
        <form id="settings-form">
          <div class="form-group">
            <label class="form-label" for="settings-follow-up-days">Follow-up after (working days)</label>
            <input type="number" class="input" id="settings-follow-up-days" min="1" max="30" value="2">
            <p class="help-text">
              Jobs will show "Follow up" badge after this many working days
              (weekends excluded) since last activity.
            </p>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
            <button type="submit" class="btn btn-primary">Save settings</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Interview Scheduling Modal -->
    <div class="modal-overlay hidden" id="interview-modal-overlay">
      <div class="modal" id="interview-modal">
        <div class="modal-header">
          <h2>üìÖ Schedule interview</h2>
          <button class="btn btn-icon btn-ghost modal-close">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 5l10 10M15 5l-10 10"/>
            </svg>
          </button>
        </div>

        <form id="interview-form">
          <div class="form-row">
            <div class="form-group">
              <label for="interview-date">Date</label>
              <input type="date" class="input" id="interview-date" required>
            </div>
            <div class="form-group">
              <label for="interview-time">Time</label>
              <input type="time" class="input" id="interview-time" required>
            </div>
          </div>

          <div class="form-group">
            <label for="interview-type">Interview type</label>
            <select class="input" id="interview-type" required>
              <option value="">Select type...</option>
              <option value="Recruiter Screen">Recruiter Screen</option>
              <option value="Hiring Manager Call">Hiring Manager Call</option>
              <option value="Technical Round">Technical Round</option>
              <option value="System Design">System Design</option>
              <option value="Behavioral Interview">Behavioral Interview</option>
              <option value="Panel Interview">Panel Interview</option>
              <option value="Final Round">Final Round</option>
              <option value="Onsite">Onsite</option>
              <option value="Take-Home Assignment">Take-Home Assignment</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="form-group" id="interview-type-custom-group" style="display: none;">
            <label for="interview-type-custom">Custom type</label>
            <input type="text" class="input" id="interview-type-custom" placeholder="Enter custom interview type">
          </div>

          <div class="form-group">
            <label for="interview-notes">Notes (optional)</label>
            <textarea class="input" id="interview-notes" rows="3" placeholder="Interviewer name, preparation notes, meeting link..."></textarea>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
            <button type="submit" class="btn btn-primary">Add interview</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Batch Apply Modal -->
    <div class="modal-overlay hidden" id="batch-apply-modal-overlay">
      <div class="modal" id="batch-apply-modal">
        <div class="modal-header">
          <h2>üöÄ Batch apply to jobs</h2>
          <button class="btn btn-icon btn-ghost modal-close">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 5l10 10M15 5l-10 10"/>
            </svg>
          </button>
        </div>

        <form id="batch-apply-form">
          <div class="form-group">
            <label for="batch-target">Number of applications</label>
            <input type="number" class="input" id="batch-target" min="1" max="50" value="10" required>
            <p class="form-hint">How many successful applications to submit (max 50)</p>
          </div>

          <div class="form-group">
            <label for="batch-urls">Job URLs (optional)</label>
            <textarea class="input" id="batch-urls" rows="5" placeholder="Paste job URLs here, one per line...&#10;&#10;Leave empty to automatically search LinkedIn based on your preferences"></textarea>
            <p class="form-hint">If empty, will search LinkedIn using target_roles, location, and other preferences from applicant.yaml</p>
          </div>

          <div class="batch-info">
            <div class="batch-info-item">
              <span class="batch-info-icon">‚è±Ô∏è</span>
              <span>Each application takes ~2-5 minutes</span>
            </div>
            <div class="batch-info-item">
              <span class="batch-info-icon">üí∞</span>
              <span>Estimated cost: ~$0.20-0.50 per application</span>
            </div>
            <div class="batch-info-item">
              <span class="batch-info-icon">üìù</span>
              <span>Resume is tailored for each job automatically</span>
            </div>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
            <button type="submit" class="btn btn-accent">
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l4 4 8-8"/>
              </svg>
              Start batch
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu hidden" id="context-menu">
      <!-- Menu items inserted dynamically -->
    </div>

  </div>

  <!-- Scripts -->
  <script src="/storage-adapter.js"></script>
  <script src="/tracker.js"></script>
</body>
</html>
